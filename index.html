<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils@0.6/control_utils.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.3/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils@0.6/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.3/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh@0.4/face_mesh.js" crossorigin="anonymous"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>Communication Board</title>
</head>

<body style="background-color: #fff;">
    <div class="container" style="display: none">
        <video style="visibility: hidden" class="input_video"></video>
        <canvas class="output_canvas" width="1280px" height="720px">
  </div>

  <h6 id="loadingtext" style="Text-align: center">Loading...</h6>
  <div id="loader" class="loader"></div>
  <div class="container-fluid" style="max-width:210vh; margin-left:auto, 0%">
    <div class="row">
      <div class="col-xs-1" style="max-width:7%; margin-left:auto">
        <div id="leftarrow" class="row" style="height:100%">
          <img src="images/arrow-left.svg" alt="left arrow" style="width:100%;height:100%">
        </div>
      </div>
      <div class="col-sm-5 border border-secondary" style='background:#fff'>
        <div class="row">
          <h4 id="lookleft" style="Text-align: center">Look Left</h1>
          <div class="col">
            <div><img src="Icons/1-Afraid.jpeg" alt="I am afraid" id="img000" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/5-Sad.jpeg" alt="I am sad" id="img010" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/9-Tired.jpeg" alt="I am tired" id="img020" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/13-Angry.jpeg" alt="I am angry" id="img030" style="max-height:100%; max-width:100%"></div>
          </div>
          <div class="col">
            <div><img src="Icons/2-Pain.jpeg" alt="I am in pain" id="img001" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/6-Frustrated.jpeg" alt="I am frustrated" id="img011" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/10-FeelSick.jpeg" alt="I am feeling sick" id="img021" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/14-Dizzy.jpeg" alt="I am dizzy" id="img031" style="max-height:100%; max-width:100%"></div>
          </div>
          <div class="col">
            <div><img src="Icons/3-Yes.jpeg" alt="Yes" id="img002" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/7-Nurse.jpeg" alt="Nurse" id="img012" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/11-Cold_hot.jpeg" alt="I am hot cold" id="img022" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/15-Choking.jpeg" alt="I am choking" id="img032" style="max-height:100%; max-width:100%"></div>
          </div>
          <div class="col">
            <div><img src="Icons/4-No.jpeg" alt="No" id="img003" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/8-Doctor.jpeg" alt="Doctor" id="img013" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/12-ShortofBreath.jpeg" alt="I am short of breath" id="img023" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/16-Hungry.jpeg" alt="I am Hungry" id="img033" style="max-height:100%; max-width:100%"></div>
          </div>
        </div>
      </div>

      <div class="col-sm-5 border border-start-0 border-secondary" style='background:#fff'>
        <div class="row">
          <h4 id="lookright" style="Text-align: center">Look Right</h1>

          <div class="col">
            <div><img src="Icons/17-HowamI.jpeg" alt="How am I doing" id="img100" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/21-Situp.jpeg" alt="Want to lie situp" id="img110" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/25-Light.jpeg" alt="Want lights off/on" id="img120" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/29-Suction.jpeg" alt="Want suction" id="img130" style="max-height:100%; max-width:100%"></div>
          </div>
          <div class="col">
            <div><img src="Icons/18-WhatTime.jpeg" alt="What time" id="img101" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/22-LieDown.jpeg" alt="Want to lie down" id="img111" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/26-CallLight.jpeg" alt="Call light remote" id="img121" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/30-LipsMoistened.jpeg" alt="Want lips moistened" id="img131" style="max-height:100%; max-width:100%"></div>
          </div>
          <div class="col">
            <div><img src="Icons/19-WhatsHappening.jpeg" alt="Whats happening" id="img102" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/23-Home.jpeg" alt="Want to go home" id="img112" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/27-Water.jpeg" alt="Want water" id="img122" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/31-Sleep.jpeg" alt="Want to sleep" id="img132" style="max-height:100%; max-width:100%"></div>
          </div>
          <div class="col">
            <div><img src="Icons/20-Comeback.jpeg" alt="Want to come back" id="img103" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/24-TV_Video.jpeg" alt="Want tv video" id="img113" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/28-Glasses.jpeg" alt="Want glasses" id="img123" style="max-height:100%; max-width:100%"></div>
            <div><img src="Icons/32-SoundOff.jpeg" alt="Want sound on off" id="img133" style="max-height:100%; max-width:100%"></div>
          </div>
        </div>
      </div>
      <div class="col-xs-1" style="max-width:7%;margin-right:auto">
        <div id="rightarrow" class="row" style="height:100%">
          <img src="images/arrow-right.svg" alt="right arrow" style="width:100%;height:100%">
        </div>
      </div>
    </div>
  </div>

  <style>
  #myImg {
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
  }

  /* The Modal (background) */
  .modal {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      z-index: 1; /* Sit on top */
      padding-top: 100px; /* Location of the box */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
  }

  /* Modal Content (image) */
  .modal-content {
      margin: auto;
      display: block;
      max-width: 80vh;
      max-height: 80vh;
  }

  /* Add Animation */
  .modal-content, #caption {
      -webkit-animation-name: zoom;
      -webkit-animation-duration: 0.6s;
      animation-name: zoom;
      animation-duration: 0.6s;
  }

  @-webkit-keyframes zoom {
      from {-webkit-transform:scale(0)}
      to {-webkit-transform:scale(1)}
  }

  @keyframes zoom {
      from {transform:scale(0)}
      to {transform:scale(1)}
  }

  /* The Close Button */
  .close {
      position: absolute;
      top: 15px;
      right: 35px;
      color: #f1f1f1;
      font-size: 40px;
      font-weight: bold;
      transition: 0.3s;
  }

  .close:hover,
  .close:focus {
      color: #bbb;
      text-decoration: none;
      cursor: pointer;
  }

  .loader {
    position: fixed;
    height: 100px;
    left: 49%;
    margin-top: -50px;
    margin-left: -50px;
    position: absolute;
    top: 50%;
    width: 100px;
    z-index: 1000;
    border: 16px solid #f3f3f3; /* Light grey */
    border-top: 16px solid #3498db; /* Blue */
    border-radius: 50%;

    animation: spin 2s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.control-panel-entry {
    width: 250px;
    background-color: #fff;
    border: none; 
    border-radius: none;
    box-shadow: none;
    cursor: pointer;
    font-family: "Titillium Web",sans-serif;
    font-size: 15px;
    line-height: 25px;
    opacity: .8;
    padding: 0px 0px;
    position: relative;
    z-index: 100;
}

  </style>
  <div id="myModal" class="modal">
     <img class="modal-content" id="modalImgID">
   </div>
  <!-- Optional JavaScript; choose one of the two! -->

  <!-- Option 1: Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <div class="btn-group" role="group" aria-label="Basic outlined" style="padding-top: 2%;left: 50%;transform: translateX(-50%)">
    <button type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasHowTo" class="btn btn-outline-dark" style="border-color: transparent">How To</button>
    <button type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSettings" class="btn btn-outline-dark" style="border-color: transparent">Settings</button>
    <button type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasAbout" class="btn btn-outline-dark" style="border-color: transparent">About</button>
  </div>

  <!--<link rel="stylesheet" href="eye.css">-->
  <div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasHowTo" aria-labelledby="offcanvasBottomLabel" style="height:75vh">
    <div class="offcanvas-header">
      <h5 style="margin-left: auto;margin-right: auto" class="offcanvas-title" id="offcanvasBottomLabel">How To</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    
    <div class="offcanvas-body">
      <span style="text-align: center;display: block">Look to the left and right to select elements on that side. Blink left or right eye to pause.</span>
      <img src="images/lookleftrightcrop.gif" alt="look left right" style="display: block; margin-left: auto; margin-right: auto;width:30%;">
      <span style="text-align: center;display: block">The sound on/off icon will turn the sound on and off. You can also connect the light icon to a switch or lightbulb.</span>
    </div>
  </div>


  <div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasSettings" aria-labelledby="offcanvasBottomLabel" style="height:50vh">
    <div class="offcanvas-header">
      <h5 style="margin-left: auto;margin-right: auto" class="offcanvas-title" id="offcanvasBottomLabel">Settings</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p>
        <button id="bluetoothButton" type="button" class="btn btn-outline-secondary">
          <img src="images/bluetoothOff.svg" width="16" height="16" viewBox="0 0 16 16"></img>
          Bluetooth Disconnected
        </button>

        <button id="soundButton" type="button" class="btn btn-outline-secondary">
          <img src="images/volume-mute.svg" width="16" height="16" viewBox="0 0 16 16"></img>
          Sound Off
        </button>
    </p>
      <h6>Camera Selector</h6>
      <div class="control-panel"></div>
      <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
        <li class="nav-item">
            <h6>Look left/right sensitivity</h6>
            <input id="lookleftrightsensslider" type="range" step="0.01" min="0.02" max="0.3" value="0.08"> <span id="lookleftrightsens">0.08</span>
        </li>
        <li class="nav-item">
          <h6>Look up sensitivity</h6>
          <input id="lookupsensslider" type="range" step="0.01" min="0.02" max="0.3" value="0.11"> <span id="lookupsens">0.11</span>
      </li>
        <li class="nav-item">
            <h6>Time needed to activate selection</h6>
            <input id="timetoactivateslider" type="range" step="10" min="100" max="3000" value="300"> <span id="timetoactivate">300</span>
        </li>
        <li class="nav-item">
          <h6>Time needed to activate look up to pause</h6>
          <input id="timetoactivatelookupslider" type="range" step="10" min="50" max="2500" value="200"> <span id="timetoactivatelookup">200</span>
      </li>
      <li class="nav-item">
        <h6>Eye Blink Sensitivity</h6>
        <input id="eyeblinksensslider" type="range" step="0.1" min="2" max="10" value="5.5"> <span id="eyeblinksens">5.5</span>
    </li>
    <li class="nav-item">
      <h6>Eye Open Sensitivity</h6>
      <input id="eyeopensensslider" type="range" step="0.1" min="2" max="10" value="4"> <span id="eyeopensens">4</span>
  </li>     
    </ul>
    </div>
  </div>

  <div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasAbout" aria-labelledby="offcanvasBottomLabel" style="height:50vh">
    <div class="offcanvas-header">
      <h5 style="margin-left: auto;margin-right: auto" class="offcanvas-title" id="offcanvasBottomLabel">About</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <span style="text-align: center;display: block">The Communication Board was created by Dr. Adam Delora and Dr. Jeffrey Ebin</span><br><br>
      <span style="text-align: center;display: block">Contact <a href = "mailto: jeffrey@ebcore.io">Jeffrey@ebcore.io</a> for more information</span>
    </div>
  </div>

  <script type="module" src="script.js" defer></script>
</body>

</html>
